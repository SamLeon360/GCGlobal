import 'package:easy_localization/easy_localization.dart';import 'package:flutter/cupertino.dart';import 'package:flutter/material.dart';import 'package:gcglobal/Dialog/GCSureAlertDialog.dart';import 'package:gcglobal/Widghts/GCNavBar.dart';class GCHouseCalculatePageView extends StatefulWidget{  int selectType = 0;  double lilv = 0.0;  double lpr = 4.65;  double jidian = 0.0;  @override  State<StatefulWidget> createState() {    // TODO: implement createState    return GCHouseCalculateState();  }}class GCHouseCalculateState extends State<GCHouseCalculatePageView>  {  TextEditingController _textEditingController = new TextEditingController();  @override  void initState() {    // TODO: implement initState    super.initState();    _textEditingController.addListener(() {      if(double.parse(_textEditingController.text)>=0.1) {        setState(() {          widget.jidian = double.parse(_textEditingController.text);          widget.lilv = widget.jidian/100 + widget.lpr;        });      }    });  }  @override  void dispose() {    // TODO: implement dispose    super.dispose();  }  @override  Widget build(BuildContext context) {    // TODO: implement build    return Scaffold(      appBar: GCNavBar(title: tr("生成發票"),leftIcon:Icon(Icons.arrow_back_ios_outlined),rightIcon1: null,rightIcon2: null,        onPressed1:null,        onPressed2: null,      ),      body: Container(        color: Colors.white,        child: ListView(          children: [            ///计算方式            Container(              margin: EdgeInsets.only(top: 10,left: 15,right: 15),              height: 42,              alignment: Alignment.centerLeft,              child: Row(                crossAxisAlignment: CrossAxisAlignment.center,                children: [                  Container(                    width: 104,                    height: 22,                    child: Text(                      tr("計算方式"),                      style: TextStyle(                          fontSize: 16,                          fontWeight: FontWeight.w500,                          color: Color(0xFF666666)                      ),                    ),                  ),                  ///tabbar处理，有相应属性修改                  Container(                    height: 22,                    margin: EdgeInsets.only(top: 2.5),                    child:Column(                      children: [                        Row(                          crossAxisAlignment: CrossAxisAlignment.center,                          children: [                            GestureDetector(                              child: Text(                                tr("按貸款總額"),                                style: widget.selectType == 0?TextStyle(                                    color: Color(0xFFB03725),                                    fontSize: 14,                                    fontWeight: FontWeight.w500                                ):TextStyle(                                    color: Color(0xFF333333),                                    fontSize: 12,                                    fontWeight: FontWeight.w500                                ),                              ),                              onTap: (){                                setState(() {                                  widget.selectType = 0;                                });                              },                            ),                           GestureDetector(                             child:  Container(                               margin: EdgeInsets.only(left: 30),                               child: Text(                                 tr("按房屋總額"),                                 style: widget.selectType == 1?TextStyle(                                     color: Color(0xFFB03725),                                     fontSize: 14,                                     fontWeight: FontWeight.w500                                 ):TextStyle(                                     color: Color(0xFF333333),                                     fontSize: 12,                                     fontWeight: FontWeight.w500                                 ),                               ),                             ),                             onTap: (){                               setState(() {                                 widget.selectType = 1;                               });                             },                           )                          ],                        ),                      ],                    )                    ,                  )                ],              ),            ),            ///貸款金額            Container(              margin: EdgeInsets.only(top: 0,left: 15,right: 15),              height: 50,              child: Row(                crossAxisAlignment: CrossAxisAlignment.center,                children: [                  Container(                    height: 22,                    width: 104,                    child: Text(                      tr("貸款金額"),                      style: TextStyle(                        color: Color(0xFF333333),                        fontSize: 14,                        fontWeight: FontWeight.w400                      ),                    ),                  ),                  Expanded(child: Container(                    height: 30,                    decoration: BoxDecoration(                      border: Border(bottom: BorderSide(color: Color(0xFFE4E4E4)))                    ),                    margin: EdgeInsets.only(left: 0,right: 20,top: 7),                    child: TextField(                      cursorColor: Colors.black,                      decoration: InputDecoration.collapsed(                        hintText: tr("請輸入貸款金額"),                        hintStyle: TextStyle(                            fontSize: 14                        ),                      ),                      style: TextStyle(                          color: Color(0xFF333333),                          fontSize: 14                      ),                    ),                  )),                  Text(                    tr("萬元"),                    style: TextStyle(                      color: Color(0xFF333333),                      fontSize: 14,                      fontWeight: FontWeight.w400                    ),                  )                ],              ),            ),            ///貸款方式            Container(              margin: EdgeInsets.only(top: 0,left: 15,right: 15),              height: 42,              alignment: Alignment.centerLeft,              child: Row(                crossAxisAlignment: CrossAxisAlignment.center,                children: [                  Container(                    width: 104,                    height: 22,                    child: Text(                      tr("貸款方式"),                      style: TextStyle(                          fontSize: 16,                          fontWeight: FontWeight.w500,                          color: Color(0xFF666666)                      ),                    ),                  ),                  Container(                    height: 30,                    margin: EdgeInsets.only(top: 10),                    child:Column(                      children: [                        Text(                          tr("商業貸"),                          style: TextStyle(                              color: Color(0xFF333333),                              fontSize: 14,                              fontWeight: FontWeight.w500                          ),                        ),                        Center(                          child: Container(                            margin: EdgeInsets.only(top: 5),                            height: 2,                            width: 33,                            color: Color(0xFFB03725),                          ),                        )                      ],                    ),                  )                ],              ),            ),            ///貸款年限            Container(              margin: EdgeInsets.only(top: 0,left: 15,right: 15),              height: 40,              child: Row(                mainAxisAlignment: MainAxisAlignment.spaceBetween,                crossAxisAlignment: CrossAxisAlignment.center,                children: [                  Container(                    height: 22,                    width: 104,                    child: Text(                      tr("貸款金額"),                      style: TextStyle(                          color: Color(0xFF333333),                          fontSize: 14,                          fontWeight: FontWeight.w400                      ),                    ),                  ),                  Spacer(),                  Text(                    "30年",                    style: TextStyle(                      fontSize: 14,                      color: Color(0xFF333333)                    ),                  ),                  Container(                    height: 16,width: 16,                    decoration: BoxDecoration(                      image: DecorationImage(                        image: AssetImage("assets/homepage/right_anchor/icon_youjiantou_X@2x.png")                      )                    ),                  )                ],              ),            ),            ///最新LPR            Container(              margin: EdgeInsets.only(top: 0,left: 15,right: 15),              height: 40,              child: Row(                mainAxisAlignment: MainAxisAlignment.spaceBetween,                crossAxisAlignment: CrossAxisAlignment.center,                children: [                  Container(                    height: 22,                    width: 104,                    child: Text(                      tr("利率方式"),                      style: TextStyle(                          color: Color(0xFF333333),                          fontSize: 14,                          fontWeight: FontWeight.w400                      ),                    ),                  ),                  Text(                    "最新LPR",                    style: TextStyle(                        fontSize: 14,                        color: Color(0xFF333333)                    ),                  ),                ],              ),            ),            Container(              margin: EdgeInsets.only(top: 0,left: 15,right: 15),              height: 40,              child: Row(                mainAxisAlignment: MainAxisAlignment.spaceBetween,                crossAxisAlignment: CrossAxisAlignment.center,                children: [                  GestureDetector(                    child: Container(                      height: 22,                      child: Text(                        tr("LPR"),                        style: TextStyle(                            color: Color(0xFF333333),                            fontSize: 14,                            fontWeight: FontWeight.w400                        ),                      ),                    ),                    onTap: (){                      showDialog(context: context, builder: (BuildContext context){                        return GCSureAlertDialog(type: 0,);                      });                    },                  ),                  Container(                    margin: EdgeInsets.only(left: 3,bottom: 5),                    height: 12,width: 12,                    decoration: BoxDecoration(                      image: DecorationImage(                        image: AssetImage("assets/homepage/wenhao/icon_wenhao@2x.png")                      )                    ),                  ),                  Spacer(),                  Text(                    "${widget.lpr}%",                    style: TextStyle(                        fontSize: 14,                        color: Color(0xFF333333)                    ),                  ),                ],              ),            ),            ///基點            Container(              margin: EdgeInsets.only(top: 0,left: 15,right: 15),              height: 40,              child: Row(                crossAxisAlignment: CrossAxisAlignment.center,                children: [                  Container(                    width: 104,                    height: 22,                    child: GestureDetector(                      child: Row(                        children: [                          Container(                            height: 22,                            child: Text(                              tr("基點"),                              style: TextStyle(                                  color: Color(0xFF333333),                                  fontSize: 14,                                  fontWeight: FontWeight.w400                              ),                            ),                          ),                          Container(                            margin: EdgeInsets.only(left: 3,bottom: 2),                            height: 12,width: 12,                            decoration: BoxDecoration(                                image: DecorationImage(                                    image: AssetImage("assets/homepage/wenhao/icon_wenhao@2x.png")                                )                            ),                          ),                        ],                      ),                      onTap: (){                        showDialog(context: context, builder: (BuildContext context){                          return GCSureAlertDialog(type: 1,);                        });                      },                    ),                  ),                  Expanded(child: Container(                    height: 30,                    decoration: BoxDecoration(                        border: Border(bottom: BorderSide(color: Color(0xFFE4E4E4)))                    ),                    margin: EdgeInsets.only(left: 0,right: 20,top: 7),                    child: TextField(                      controller: _textEditingController,                      cursorColor: Colors.black,                      decoration: InputDecoration.collapsed(                        hintText: tr("請輸入基點"),                        hintStyle: TextStyle(                            fontSize: 14                        ),                      ),                      style: TextStyle(                          color: Color(0xFF333333),                          fontSize: 14                      ),                    ),                  )),                  Text(                    tr("BP(‱)"),                    style: TextStyle(                        color: Color(0xFF333333),                        fontSize: 14,                        fontWeight: FontWeight.w400                    ),                  )                ],              ),            ),            ///商贷利率            Container(              margin: EdgeInsets.only(top: 10,left: 15,right: 15),              height: 40,              child: Row(                crossAxisAlignment: CrossAxisAlignment.center,                children: [                  Container(                    height: 22,                    width: 104,                    child: Text(                      tr("貸款金額"),                      style: TextStyle(                          color: Color(0xFF333333),                          fontSize: 14,                          fontWeight: FontWeight.w400                      ),                    ),                  ),                  Expanded(child: Container(                    height: 22,                    margin: EdgeInsets.only(left: 0,right: 20,top: 7),                    child: Text(                      "${widget.lpr}% + ${widget.jidian}‱ =",                      style: TextStyle(                        color: Color(0xFF333333),                        fontSize: 14                      ),                    ),                  )),                  Text(                    "${widget.lilv}%",                    style: TextStyle(                        color: Color(0xFF333333),                        fontSize: 14,                        fontWeight: FontWeight.w400                    ),                  )                ],              ),            ),            ///開始計算            Container(              margin: EdgeInsets.only(top: 20),              height: 50,              child: GestureDetector(                child: Container(                  alignment: Alignment.center,                  margin: EdgeInsets.only(left: 55,right: 55,top: 7,bottom: 7),                  decoration: BoxDecoration(                      border: Border.all(color: Color(0xFFB03725)),                      shape: BoxShape.rectangle,                      borderRadius: BorderRadius.all(Radius.circular(4))                  ),                  child: Text(                    tr("開始計算"),                    style: TextStyle(                        color: Color(0xFFB03725),                        fontSize: 16                    ),                  ),                ),              ),            )          ],        ),      ),    );  }  }